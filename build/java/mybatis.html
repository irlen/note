<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="X-UA-Compatible" content="ie=edge"><title>mybatis - 欢迎使用Teadocs文档生成系统</title><meta name="description" content="###springboot中注解方式使用mybatis"><meta name="keywords" content="mybatis - 欢迎使用Teadocs文档生成系统"><script src="/static/js/jquery-3.3.1.min.js"></script><script src="/static/js/vue.min.js"></script><link rel="stylesheet" href="/static/css/normalize.min.css"><link rel="stylesheet" href="/static/css/monaco.css"><link rel="stylesheet" href="/static/css/loading.css"><link rel="stylesheet" href="/static/css/editormd.min.css"><link rel="stylesheet" href="/static/css/style.css"><link rel="stylesheet" href="/static/css/mobile.css"><link rel="stylesheet" href="/static/font-awesome-4.7.0/css/font-awesome.min.css"><link rel="stylesheet" href="/static/css/highlight.default.min.css"><script src="/static/js/highlight.min.js"></script><script>window._CONST={ROOT_PATH:"/"},hljs.initHighlightingOnLoad()</script></head><body><div class="main"><div class="tea-menu"><div class="tea-menu-title"><i class="fa fa-home" aria-hidden="true"></i> <span>欢迎使用Teadocs文档生成系统</span></div><div class="tea-menu-search-warp"><i class="fa fa-search"></i> <input type="text" placeholder="搜索文档" value height="100%"></div><ul class="tea-menu-list"><li><a href="/index.html" title="介绍">介绍</a></li><li><a title="大前端">大前端<i class="fa fa-angle-down unfold"></i></a><ul class="unfold"><li><a title="react">react<i class="fa fa-angle-down"></i></a><ul><li><a href="/front/react/react-hooks.html" title="react-hooks">react-hooks</a></li></ul></li><li><a title="vue">vue<i class="fa fa-angle-down"></i></a><ul><li><a href="/front/vue/project.html" title="vue工程">vue工程</a></li><li><a href="/front/vue/vuebase.html" title="vue基础语法">vue基础语法</a></li></ul></li></ul></li><li><a title="移动端">移动端<i class="fa fa-angle-down unfold"></i></a><ul class="unfold"><li><a href="/mobile/reactnative.html" title="react-native">react-native</a></li></ul></li><li><a title="数据库">数据库<i class="fa fa-angle-down unfold"></i></a><ul class="unfold"><li><a href="/database/mysql.html" title="mysql">mysql</a></li></ul></li><li><a title="java" class="active">java<i class="fa fa-angle-down unfold"></i></a><ul class="unfold"><li><a href="/java/mybatis.html" title="mybatis" class="active">mybatis</a></li><li><a href="/java/springboot.html" title="SpringBoot">SpringBoot</a></li><li><a href="/java/annotation.html" title="annotation">annotation</a></li><li><a href="/java/method.html" title="常用方法">常用方法</a></li><li><a href="/java/api.html" title="常用api">常用api</a></li></ul></li><li><a title="微信小程序">微信小程序<i class="fa fa-angle-down unfold"></i></a><ul class="unfold"><li><a href="/wechat/wechat.html" title="微信小程序">微信小程序</a></li></ul></li><li><a title="Bash脚本">Bash脚本<i class="fa fa-angle-down unfold"></i></a><ul class="unfold"><li><a href="/bash/introduce.html" title="简介">简介</a></li></ul></li><li><a title="git">git<i class="fa fa-angle-down unfold"></i></a><ul class="unfold"><li><a href="/git/git.html" title="git">git</a></li></ul></li><li><a title="运维">运维<i class="fa fa-angle-down unfold"></i></a><ul class="unfold"><li><a href="/ops/docker.html" title="docker">docker</a></li><li><a href="/ops/nginx.html" title="nginx">nginx</a></li></ul></li><li><a title="正则">正则<i class="fa fa-angle-down unfold"></i></a><ul class="unfold"><li><a href="/regexp/regexp.html" title="正则">正则</a></li></ul></li></ul><div class="tea-version"><p>version: 0.0.1</p><p>Built with <a href="https://github.com/lisniuse/teadocs" target="_blank">Teadocs</a></p></div></div><div class="tea-content"><div class="tea-nav"><h3 class="top-title" style="font-weight:500;margin:0;font-size:16px"><i class="fa fa-navicon" aria-hidden="true"></i> <span>mybatis</span></h3><div class="article-meta"></div></div><div class="tea-container"><article class="markdown-body"><h3 id="mybatis"><a href="#mybatis" class="header-anchor">#</a> <span>mybatis</span></h3><p>###springboot中注解方式使用mybatis</p><p>mybatis起步依赖</p><pre class="prettyprint"><code>&lt;dependency&gt;
    &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;
    &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;
    &lt;version&gt;2.1.2&lt;/version&gt;
&lt;/dependency&gt;</code></pre><p>mysql起步依赖</p><pre class="prettyprint"><code>&lt;dependency&gt;
    &lt;groupId&gt;mysql&lt;/groupId&gt;
    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre><p>application.yml配置</p><pre class="prettyprint"><code>spring:
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    username: root
    password: irlen
    url: jdbc:mysql://10.0.0.99:3306/sell?characterEncoding=utf-8&useSSL=false
  jpa:
    show-sql: true</code></pre><p>启动类添加@MapperScan</p><pre class="prettyprint"><code>@MapperScan(basePackages="mapper包的位置")</code></pre><p>编写实体类（省略）和mapper</p><pre class="prettyprint"><code>@Mapper
public interface UserMapper {
  @Insert("insert into user (user_id,user_name,password,role_id) values(" +
          "#{userId,jdbcType=VARCHAR}," +
          "#{userName,jdbcType=VARCHAR}," +
          "#{password,jdbcType=VARCHAR}," +
          "#{roleId,jdbcType=INTEGER}" +
          ")")
   int saveUser(User user);

  @Select("select * from user")
  @Results({
          @Result(column="user_id", property="userId"),
          @Result(column="user_name",property="userName"),
          @Result(column="password",property="password"),
          @Result(column="role_id",property = "roleId")

  })
  List&lt;User&gt; findAll();

  /**
   * 根据字段更新
   * @param roleId
   * @param userName
   * @return
   */
  @Update("update user set role_id=#{roleId} where user_name=#{userName}")
  int updateUser(@Param("roleId") Integer roleId,@Param("userName") String userName);

  /**
   * 根据对象来更新
   * @param user
   * @return
   */
  @Update("update user set role_id=#{roleId} where user_name=#{userName}")
  int updateUserByObject(User user);

  @Delete("delete from user where user_name=#{userName}")
  int deleteUser(String userName);
}</code></pre><p>如果想打印出sql语句，可以利用日志，在application.yml中配置<br>logging:<br>level:<br>com.imooc.dataobject.mapper: trace //mapper文件的路径</p><p>最后可以像springDataJPA一样分层<br>mapper->dao->service</p></article><div class="page"><a class="page-prev" href="/database/mysql.html"><i class="fa fa-arrow-left" aria-hidden="true"></i> mysql </a><a class="page-next" href="/java/springboot.html">SpringBoot <i class="fa fa-arrow-right" aria-hidden="true"></i></a></div><div class="toc"><ul class="toc-affix"><li class="toc-item text-elli" style="padding-left:15px" data-link="mybatis"><a href="#mybatis" title="mybatis">mybatis</a></li></ul></div></div></div><i class="fa fa-arrow-circle-up gotop" aria-hidden="true"></i><div id="menu-mask"></div></div><script src="/data.js"></script><script src="/static/js/main.js"></script><script src="/static/js/mobile.js"></script>
<script src="/__webscoket__/socket.io.js"></script>
<script src="/__webscoket__/socket.client.js"></script>
</body></html>
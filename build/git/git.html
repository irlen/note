<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="X-UA-Compatible" content="ie=edge"><title>git - 欢迎使用Teadocs文档生成系统</title><meta name="description" content="创建一个空目录，并初始化mkdir learngitcd learngitgit initgit init --bare //初始化一个纯版本目录，不带本地仓库"><meta name="keywords" content="git - 欢迎使用Teadocs文档生成系统"><script src="/static/js/jquery-3.3.1.min.js"></script><script src="/static/js/vue.min.js"></script><link rel="stylesheet" href="/static/css/normalize.min.css"><link rel="stylesheet" href="/static/css/monaco.css"><link rel="stylesheet" href="/static/css/loading.css"><link rel="stylesheet" href="/static/css/editormd.min.css"><link rel="stylesheet" href="/static/css/style.css"><link rel="stylesheet" href="/static/css/mobile.css"><link rel="stylesheet" href="/static/font-awesome-4.7.0/css/font-awesome.min.css"><link rel="stylesheet" href="/static/css/highlight.default.min.css"><script src="/static/js/highlight.min.js"></script><script>window._CONST={ROOT_PATH:"/"},hljs.initHighlightingOnLoad()</script></head><body><div class="main"><div class="tea-menu"><div class="tea-menu-title"><i class="fa fa-home" aria-hidden="true"></i> <span>欢迎使用Teadocs文档生成系统</span></div><div class="tea-menu-search-warp"><i class="fa fa-search"></i> <input type="text" placeholder="搜索文档" value height="100%"></div><ul class="tea-menu-list"><li><a href="/index.html" title="介绍">介绍</a></li><li><a title="大前端">大前端<i class="fa fa-angle-down unfold"></i></a><ul class="unfold"><li><a title="react">react<i class="fa fa-angle-down"></i></a><ul><li><a href="/front/react/react-hooks.html" title="react-hooks">react-hooks</a></li></ul></li><li><a title="vue">vue<i class="fa fa-angle-down"></i></a><ul><li><a href="/front/vue/project.html" title="vue工程">vue工程</a></li><li><a href="/front/vue/vuebase.html" title="vue基础语法">vue基础语法</a></li></ul></li></ul></li><li><a title="数据库">数据库<i class="fa fa-angle-down unfold"></i></a><ul class="unfold"><li><a href="/database/mysql.html" title="mysql">mysql</a></li></ul></li><li><a title="java">java<i class="fa fa-angle-down unfold"></i></a><ul class="unfold"><li><a href="/java/mybatis.html" title="mybatis">mybatis</a></li><li><a href="/java/springboot.html" title="SpringBoot">SpringBoot</a></li><li><a href="/java/annotation.html" title="annotation">annotation</a></li><li><a href="/java/api.html" title="api">api</a></li></ul></li><li><a title="微信小程序">微信小程序<i class="fa fa-angle-down unfold"></i></a><ul class="unfold"><li><a href="/wechat/wechat.html" title="微信小程序">微信小程序</a></li></ul></li><li><a title="Bash脚本">Bash脚本<i class="fa fa-angle-down unfold"></i></a><ul class="unfold"><li><a href="/bash/introduce.html" title="简介">简介</a></li></ul></li><li><a title="git" class="active">git<i class="fa fa-angle-down unfold"></i></a><ul class="unfold"><li><a href="/git/git.html" title="git" class="active">git</a></li></ul></li><li><a title="运维">运维<i class="fa fa-angle-down unfold"></i></a><ul class="unfold"><li><a href="/ops/docker.html" title="docker">docker</a></li></ul></li><li><a title="正则">正则<i class="fa fa-angle-down unfold"></i></a><ul class="unfold"><li><a href="/regexp/regexp.html" title="正则">正则</a></li></ul></li></ul><div class="tea-version"><p>version: 0.0.1</p><p>Built with <a href="https://github.com/lisniuse/teadocs" target="_blank">Teadocs</a></p></div></div><div class="tea-content"><div class="tea-nav"><h3 class="top-title" style="font-weight:500;margin:0;font-size:16px"><i class="fa fa-navicon" aria-hidden="true"></i> <span>git</span></h3><div class="article-meta"></div></div><div class="tea-container"><article class="markdown-body"><h3 id="一.创建版本库（repository）"><a href="#一.创建版本库（repository）" class="header-anchor">#</a> <span>一.创建版本库（repository）</span></h3><p>创建一个空目录，并初始化<br>mkdir learngit<br>cd learngit<br>git init<br>git init --bare //初始化一个纯版本目录，不带本地仓库</p><h3 id="二.把文件添加到版本库"><a href="#二.把文件添加到版本库" class="header-anchor">#</a> <span>二.把文件添加到版本库</span></h3><p>建一个文件，并告诉git把文件添加到仓库<br>touch readme.txt<br>git add readme.txt //文件添加到仓库<br>git commit -m '描述内容' //把文件提交到git仓库</p><h3 id="三.时光穿梭机"><a href="#三.时光穿梭机" class="header-anchor">#</a> <span>三.时光穿梭机</span></h3><p>1.版本回退<br>git status //git会告诉我们是否有改动，改动是否提交，但不会告诉我们具体改动的地方<br>git diff readme.txt //git会告诉你readme.txt文件里面具体被改动的地方<br>每次修改文件或者文件夹后需要做两个操作，<br>git add (文件或者文件夹)<br>git commit -m '描述'<br>git log 显示最近到最远的提交日志<br>回退到某个版本，HEAD表示当前版本，HEAD^表示上一个版本 HEAD~100表示往上数第一百个版本<br>git reset --hard HEAD^<br>git reset --hard 190dee23dkd //后面为要回退版本的id,只用写前几位就可以了<br>如果回退到某个版本，又后悔了想回到之前的版本，这个时候没有id<br>git reflog //会显示之前每次的命令</p><p>2.工作区和暂存区以及本地版本库<br>工作区(Working Directory)<br>即电脑里能看到的目录，你自己本地编辑的代码文件<br>工作区里面有个隐藏目录.git，这个不算工作区，而是Git的版本库（repository）<br>版本库里有个暂存区（stage或者index），还有自动创建的分支master,以及指向分支的指针HEAD<br>之前把文件往版本库里添加的时候分两步操作<br>git add 是把文件修改添加到暂存区<br>git commit 是把暂存区所有内容提交到当前分支<br>git checkout --readme.txt 丢弃工作区的修改（即回到最近一次git commit或者git add的状态）</p><p>3.管理修改<br>删除版本库中的文件<br>git rm test.txt 并且commit</p><h3 id="四.远程仓库"><a href="#四.远程仓库" class="header-anchor">#</a> <span>四.远程仓库</span></h3><p>1.添加远程库并推送本地仓库到远程仓库<br>linux设置ssh秘钥<br>ssh-keygen -t rsa -C 'wangyangruoshi@163.com'<br>将公钥添加到github，github中新建仓库(new repository)<br>在本地关联远程仓库<br>git remote add origin <a href="mailto:git@github.com">git@github.com</a>:irlen/learngit.git<br>将本地仓库的内容推送到远程仓库<br>git push -u origin master (第一次推送加上-u，不仅推送还会关联，之后推送拉取都可以简化命令)<br>2.从远程库克隆<br>git clone <a href="mailto:git@github.com">git@github.com</a>:irlen/gitskills.git</p><h3 id="五.分支管理"><a href="#五.分支管理" class="header-anchor">#</a> <span>五.分支管理</span></h3><p>1.创建与合并分支<br>创建dev分支，并切换到dev分支<br>git checkout -b dev (-b参数表示创建并切换,相当于git branch dev 和 git checkout dev两个命令)<br>git branch 查看当前分支<br>将dev分支合并到master分支<br>git checkout master<br>git merge dev<br>删除dev分支<br>git branch -d dev<br>2.解决冲突<br>两个分支改了同一个地方合并的时候发生冲突<br>git status 可查看冲突的是哪个文件<br>git会用《《《《《 ==========》》》》》》表示出不同，改统一后再git add 和 git commit<br>git log --graph 可以看到分支合并图<br>3.分支管理策略<br>合并分支时，git会用Fast forward模式，这种模式删除分支后会丢掉分支信息。<br>禁用Fast forward模式，从分支历史就可以看出分支信息<br>git merge --no-ff -m 'merge with no-off' dev<br>实际开发中，master分支应该是相当稳定，只用来发布新版本，平时不能在上面干活，干活都在dev分支上，每个人都有自己的dev分支，时不时的往dev分支上合并<br>4.暂存和删除未合并分支<br>当你在dev分支上开发到一半，突然要在maser上新建一个bug分支来改bug,这个时候dev分支因为不能提交，需要暂存起来<br>git stash 暂存现有分支为提交的内容<br>git stash list 列出暂存的工作现场<br>git stash pop 恢复工作现场并删除暂存 (相当于git stash apply 和 git stash drop 两个命令的结果)<br>当你开发一个新功能分支，然后上面告诉你这个并能不要了，那你需要将这个功能分支删除(要用大写-D 参数)<br>git branch -D branchName<br>5.多人协作<br>git remote -v 显示远程仓库的详细细信息<br>推送分支,要指定本地分支，这样，Git就会把该分支推送到远程库对应的远程分支上<br>git push origin master<br>并不是一定要把本地分支往远程推送，那么，哪些分支需要推送，哪些不需要呢？<br>master分支是主分支，因此要时刻与远程同步；<br>dev分支是开发分支，团队所有成员都需要在上面工作，所以也需要与远程同步；<br>bug分支只用于在本地修复bug，就没必要推到远程了，除非老板要看看你每周到底修复了几个bug；<br>feature分支是否推到远程，取决于你是否和你的小伙伴合作在上面开发。<br>抓取分支<br>当从远程库克隆时，默认只能看到本地的master分支，但是需要在dev分支上开发，这时候需要做以下操作<br>创建远程origin的dev分支到本地<br>git checkout -b dev origin/dev<br>假如git add 和git commit之后，git push origin dev 将dev分支推送到远程，此段时间别人也在将本地dev推送到远程，<br>此时有可能发生冲突，发生冲突如何解决：<br>git pull 将最新的提交从远程当前分支抓下来合并再提交<br>这是git pull也失败了，怎么办：<br>原因是没有指定本地dev分支和远程orgin/dev分支的链接，需要设置：<br>git branch --set-upstream-to=origin/dev dev<br>然后再git pull,会自动合并，若合并有冲突，可以修改冲突再提交git commit ,git push</p><h3 id="六.标签管理"><a href="#六.标签管理" class="header-anchor">#</a> <span>六.标签管理</span></h3><p>1.创建标签<br>tag就是一个让人容易记住的有意义的名字，它跟某个commit绑在一起<br>切换到要打标签的分支，比如dev分支<br>git checkout dev<br>给该分支打一个标签<br>git tag v1.0 （git tag -a tagname -m '描述文字'）<br>git tag 查看你打的历史标签<br>删除标签<br>git tag -d v1.0<br>2.操作标签<br>创建的标签都只存储在本地，不会自动推送到远程,可以这样将标签推送到远程<br>git push origin v1.0<br>也可以一次性将所有本地标签推送到远程<br>git push origin --tags<br>删除远程标签有点麻烦，需要先删除本地，再推送<br>git tag -d -v1.0<br>git push origin :refs/tags/v1.0</p><h3 id="七.忽略某些文件的上传"><a href="#七.忽略某些文件的上传" class="header-anchor">#</a> <span>七.忽略某些文件的上传</span></h3><p>建一个.gitignore文件，将需要忽略的文件或者文件夹名字写进去，然后将.gitignore提交到Git</p><h3 id="八.搭建私有git服务器"><a href="#八.搭建私有git服务器" class="header-anchor">#</a> <span>八.搭建私有git服务器</span></h3><p>1.安装git服务的环境<br>yum -y install curl curl-devel zlib-devel openssl-devel perl cpio expat-devel gettext-devel gcc cc<br>2.下载 git-2.5.0.tar.gz</p><pre class="prettyprint"><code>  解压
  tar -xvzf git-2.5.0.tar.gz

  cd git-2.5.0
  autoconf
  ./configure
  make
  make install</code></pre><p>3.添加用户<br>adduser -r -c 'git version control' -d /home/irlen -m irlen<br>此命令执行后会创建/home/irlen目录作为irlen用户的主目录，用户名是irlen<br>4.设置密码为irlen<br>passwd irlen<br>这时候可以在主目录中建文件夹，使用git init --bare初始化目录</p><h3 id="在IDEA中使用git"><a href="#在IDEA中使用git" class="header-anchor">#</a> <span>在IDEA中使用git</span></h3><p>配置git<br>settings->Version Control->Git<br>工程加入到本地仓库<br>VCS->Import into Version Control->Create Git repository</p></article><div class="page"><a class="page-prev" href="/bash/introduce.html"><i class="fa fa-arrow-left" aria-hidden="true"></i> 简介 </a><a class="page-next" href="/ops/docker.html">docker <i class="fa fa-arrow-right" aria-hidden="true"></i></a></div><div class="toc"><ul class="toc-affix"><li class="toc-item text-elli" style="padding-left:15px" data-link="一.创建版本库（repository）"><a href="#一.创建版本库（repository）" title="一.创建版本库（repository）">一.创建版本库（repository）</a></li><li class="toc-item text-elli" style="padding-left:15px" data-link="二.把文件添加到版本库"><a href="#二.把文件添加到版本库" title="二.把文件添加到版本库">二.把文件添加到版本库</a></li><li class="toc-item text-elli" style="padding-left:15px" data-link="三.时光穿梭机"><a href="#三.时光穿梭机" title="三.时光穿梭机">三.时光穿梭机</a></li><li class="toc-item text-elli" style="padding-left:15px" data-link="四.远程仓库"><a href="#四.远程仓库" title="四.远程仓库">四.远程仓库</a></li><li class="toc-item text-elli" style="padding-left:15px" data-link="五.分支管理"><a href="#五.分支管理" title="五.分支管理">五.分支管理</a></li><li class="toc-item text-elli" style="padding-left:15px" data-link="六.标签管理"><a href="#六.标签管理" title="六.标签管理">六.标签管理</a></li><li class="toc-item text-elli" style="padding-left:15px" data-link="七.忽略某些文件的上传"><a href="#七.忽略某些文件的上传" title="七.忽略某些文件的上传">七.忽略某些文件的上传</a></li><li class="toc-item text-elli" style="padding-left:15px" data-link="八.搭建私有git服务器"><a href="#八.搭建私有git服务器" title="八.搭建私有git服务器">八.搭建私有git服务器</a></li><li class="toc-item text-elli" style="padding-left:15px" data-link="在IDEA中使用git"><a href="#在IDEA中使用git" title="在IDEA中使用git">在IDEA中使用git</a></li></ul></div></div></div><i class="fa fa-arrow-circle-up gotop" aria-hidden="true"></i><div id="menu-mask"></div></div><script src="/data.js"></script><script src="/static/js/main.js"></script><script src="/static/js/mobile.js"></script>
<script src="/__webscoket__/socket.io.js"></script>
<script src="/__webscoket__/socket.client.js"></script>
</body></html>